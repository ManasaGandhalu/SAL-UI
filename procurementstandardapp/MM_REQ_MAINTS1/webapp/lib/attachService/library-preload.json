{
"version":"2.0",
"name":"sap.se.mi.plm.lib.attachmentservice.library-preload",
"dependencies":["sap.ui.core.library-preload","sap.m.library-preload"],
"modules":{
	"sap/se/mi/plm/lib/attachmentservice/attachment/Component.js":"/*\n * Copyright (C) 2009-2020 SAP SE or an SAP affiliate company. All rights reserved.\n */\nsap.ui.define(['sap/ui/core/UIComponent'],function(U){'use strict';var C=U.extend('sap.se.mi.plm.lib.attachmentservice.attachment.Component',{metadata:{manifest:'json',library:'sap.se.mi.plm.lib.attachmentservice',publicMethods:['save','cancel','refresh','getApplicationState','getAttachmentCount'],properties:{mode:{type:'string',group:'Misc',defaultValue:'D'},objectKey:{type:'string',group:'Misc',bindable:true,defaultValue:null},objectType:{type:'string',group:'Misc',bindable:true,defaultValue:null},isDraft:{type:'boolean',group:'Misc',bindable:true,defaultValue:false},semanticObject:{type:'string',group:'Misc',bindable:true,defaultValue:null},attachmentCount:{type:'int',group:'Misc',bindable:true,defaultValue:null},attributeHandling:{type:'object',group:'Misc',bindable:true,defaultValue:null},flavor:{type:'string',group:'Misc',defaultValue:'withoutCheckIn'}},events:{'onupload':{}}},init:function(){(U.prototype.init||jQuery.noop).apply(this,arguments);},createContent:function(){this.page=new sap.ui.view({viewName:'sap.se.mi.plm.lib.attachmentservice.attachment.view.Attachment',type:sap.ui.core.mvc.ViewType.XML});return this.page;},setProperty:function(n,v){sap.ui.core.UIComponent.prototype.setProperty.apply(this,arguments);},setMode:function(v){this.setProperty('mode',v);this.page.getController().setModeProperty();},setObjectKey:function(v){this.setProperty('objectKey',v);this.page.getController().setProperties(this.getMode(),this.getObjectType(),v,this.getSemanticObject());},setObjectType:function(v){this.setProperty('objectType',v);this.page.getController().setProperties(this.getMode(),v,this.getObjectKey(),this.getSemanticObject());},setAttributeHanding:function(v){this.page.getController().setAttributes(v);},getAttributes:function(){return this.page.getController().getAttributeList();},setAttributes:function(a){this.page.getController().setAttributes(a);},save:function(i){return this.page.getController().commitChanges(i);},cancel:function(i){return this.page.getController().cancelChanges(i);},refresh:function(a,o,b,s){this.page.getController().setProperties(a,o,b,s);},getApplicationState:function(){return this.page.getController().getApplicationState();},getAttachmentCount:function(){return this.page.getController().getAttachmentCount();},getAllAttachments:function(a,c){return this.page.getController().onDownloadAll(a,c);}});return C;});\n",
	"sap/se/mi/plm/lib/attachmentservice/attachment/components/stcomponent/Component.js":"/*\n * Copyright (C) 2009-2020 SAP SE or an SAP affiliate company. All rights reserved.\n */\nsap.ui.define(['sap/ui/core/UIComponent','sap/suite/ui/generic/template/extensionAPI/ReuseComponentSupport'],function(U,R){'use strict';var C=U.extend('sap.se.mi.plm.lib.attachmentservice.attachment.components.stcomponent.Component',{metadata:{manifest:'json',library:'sap.se.mi.plm.lib.attachmentservice',publicMethods:['save','cancel','refresh','getApplicationState','getAttachmentCount'],properties:{mode:{type:'string',group:'Misc',defaultValue:'D'},objectKey:{type:'string',group:'Misc',bindable:true,defaultValue:null},objectType:{type:'string',group:'Misc',bindable:true,defaultValue:null},isDraft:{type:'boolean',group:'Misc',bindable:true,defaultValue:false},semanticObject:{type:'string',group:'Misc',bindable:true,defaultValue:null},attachmentCount:{type:'int',group:'Misc',bindable:true,defaultValue:null},attributeHandling:{type:'object',group:'Misc',bindable:true,defaultValue:null},flavor:{type:'string',group:'Misc',defaultValue:'withoutCheckIn'}},events:{'onupload':{}}},init:function(){(U.prototype.init||jQuery.noop).apply(this,arguments);R.mixInto(this);},createContent:function(){this.page=new sap.ui.view({viewName:'sap.se.mi.plm.lib.attachmentservice.attachment.view.Attachment',type:sap.ui.core.mvc.ViewType.XML});return this.page;},setProperty:function(n,v){sap.ui.core.UIComponent.prototype.setProperty.apply(this,arguments);},stStart:function(m,b,e){var s=this;this.isSmartTemplate=true;if(e.getTransactionController().attachAfterActivate){e.getTransactionController().attachAfterActivate(function(){s.page.getController().setProperties(s.getMode(),s.getObjectType(),s.getObjectKey(),s.getSemanticObject());});}else if(e.getTransactionController().attachAfterSave){e.getTransactionController().attachAfterSave(function(){s.page.getController().setProperties(s.getMode(),s.getObjectType(),s.getObjectKey(),s.getSemanticObject());});}e.attachPageDataLoaded(function(){s.page.getController().setProperties(s.getMode(),s.getObjectType(),s.getObjectKey(),s.getSemanticObject());});e.getTransactionController().attachAfterCancel(function(){s.page.getController().setProperties(s.getMode(),s.getObjectType(),s.getObjectKey(),s.getSemanticObject());});},stRefresh:function(m,b,e){},setMode:function(v){this.setProperty('mode',v);this.page.getController().setModeProperty();},setAttributeHanding:function(v){this.page.getController().setAttributes(v);},getAttributes:function(){return this.page.getController().getAttributeList();},setAttributes:function(a){this.page.getController().setAttributes(a);},save:function(i){return this.page.getController().commitChanges(i);},cancel:function(i){return this.page.getController().cancelChanges(i);},refresh:function(a,o,b,s){this.page.getController().setProperties(a,o,b,s);},getApplicationState:function(){return this.page.getController().getApplicationState();},getAttachmentCount:function(){return this.page.getController().getAttachmentCount();}});return C;});\n",
	"sap/se/mi/plm/lib/attachmentservice/attachment/components/stcomponent/manifest.json":"{\n    \"_version\": \"1.1.0\",     \n    \"sap.app\": {\n        \"_version\": \"1.1.0\",\n        \"id\": \"sap.se.mi.plm.lib.attachmentservice.attachment.components.stcomponent\",\n        \"type\": \"library\",\n        \"i18n\": \"../../i18n/i18n.properties\",\n        \"embeddedBy\": \"se.mi.plm.lib.attachmentservice\",\n        \"title\": \"{{title}}\",\n        \"description\": \"{{description}}\",\n        \"ach\": \"PLM-FIO-DMS\",\n\t\t\"dataSources\": {\n\t\t\t\"CV_ATTACHMENT_SRV_Entities\": {\n\t\t\t\t\"uri\": \"/sap/opu/odata/sap/CV_ATTACHMENT_SRV/\"\n\t\t\t}\n\t\t},\n        \"resources\": \"resources.json\",\n        \"offline\": false\n    },\n    \"sap.ui\": {\n        \"_version\": \"1.1.0\",\n        \"technology\": \"UI5\",\n        \"deviceTypes\": {\n            \"desktop\": true,\n            \"tablet\": true,\n            \"phone\": true\n        },\n        \"supportedThemes\": [\n            \"sap_hcb\",\n            \"sap_bluecrystal\"\n        ]\n    },\n    \"sap.ui5\": {\n        \"_version\": \"1.1.0\",\n        \"dependencies\": {\n            \"libs\": {\n                \"sap.ui.core\": {},\n                \"sap.m\": {},\n                \"sap.suite.ui.generic.template\":{\"lazy\":true},\n                \"sap.se.mi.plm.lib.attachmentservice\": {}\n            },\n            \"components\": {\n            }\n        },\n        \"handleValidation\": true,\n        \"config\": {\n        },\n        \"routing\": {\n        },\n        \"contentDensities\": {\n            \"compact\": false,\n            \"cozy\": false\n        }\n    },\n    \"sap.platform.abap\": {\n        \"_version\": \"1.1.0\",\n        \"uri\": \"/sap/bc/bsp/sap/plm_ath_cres1/\"\n    },\n    \"sap.platform.hcp\": {\n        \"_version\": \"1.1.0\",\n        \"uri\": \"\"\n    },\n    \"sap.fiori\": {\n        \"_version\": \"1.1.0\",\n        \"registrationIds\": [\n            \"F1243\"\n        ],\n        \"archeType\": \"reusecomponent\"\n    }\n}",
	"sap/se/mi/plm/lib/attachmentservice/attachment/fragment/checkInActionSheet.fragment.xml":"<!--\r\n\r\n    Copyright (C) 2009-2020 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<core:FragmentDefinition\r\n\txmlns=\"sap.m\"\r\n\txmlns:core=\"sap.ui.core\">\r\n\t<ActionSheet\r\n\t\ttitle=\"\"\r\n\t\tshowCancelButton=\"true\"\r\n\t\tplacement=\"Bottom\">\r\n\t\t<buttons>\r\n\t\t\t<Button id=\"CheckInOriginal\" text=\"{i18n>Check_In_Original}\" press=\"_onCheckInOriginalPress\"/>\r\n\t\t\t<Button id=\"CheckInAsNewVersion\" text=\"{i18n>Check_In_As_New_Version}\" press=\"_onCheckInAsNewVersionPress\"/>\r\n\t\t</buttons>\r\n\t</ActionSheet>\r\n</core:FragmentDefinition>",
	"sap/se/mi/plm/lib/attachmentservice/attachment/manifest.json":"{\n    \"_version\": \"1.1.0\",     \n    \"sap.app\": {\n        \"_version\": \"1.1.0\",\n        \"id\": \"sap.se.mi.plm.lib.attachmentservice.attachment\",\n        \"type\": \"library\",\n        \"i18n\": \"i18n/i18n.properties\",\n        \"embeddedBy\": \"se.mi.plm.lib.attachmentservice\",\n        \"title\": \"{{title}}\",\n        \"description\": \"{{description}}\",\n        \"ach\": \"PLM-FIO-DMS\",\n\t\t\"dataSources\": {\n\t\t\t\"CV_ATTACHMENT_SRV_Entities\": {\n\t\t\t\t\"uri\": \"/sap/opu/odata/sap/CV_ATTACHMENT_SRV/\"\n\t\t\t}\n\t\t},\n        \"resources\": \"resources.json\",\n        \"offline\": false\n    },\n    \"sap.ui\": {\n        \"_version\": \"1.1.0\",\n        \"technology\": \"UI5\",\n        \"deviceTypes\": {\n            \"desktop\": true,\n            \"tablet\": true,\n            \"phone\": true\n        },\n        \"supportedThemes\": [\n            \"sap_hcb\",\n            \"sap_bluecrystal\"\n        ]\n    },\n    \"sap.ui5\": {\n        \"_version\": \"1.1.0\",\n        \"dependencies\": {\n            \"libs\": {\n                \"sap.ui.core\": {},\n                \"sap.m\": {},\n                \"sap.se.mi.plm.lib.attachmentservice\": {}\n            },\n            \"components\": {\n            }\n        },\n        \"handleValidation\": true,\n        \"config\": {\n        },\n        \"routing\": {\n        },\n        \"contentDensities\": {\n            \"compact\": false,\n            \"cozy\": false\n        }\n    },\n    \"sap.platform.abap\": {\n        \"_version\": \"1.1.0\",\n        \"uri\": \"/sap/bc/bsp/sap/plm_ath_cres1/\"\n    },\n    \"sap.platform.hcp\": {\n        \"_version\": \"1.1.0\",\n        \"uri\": \"\"\n    },\n    \"sap.fiori\": {\n        \"_version\": \"1.1.0\",\n        \"registrationIds\": [\n            \"F1243\"\n        ],\n        \"archeType\": \"reusecomponent\"\n    }\n}",
	"sap/se/mi/plm/lib/attachmentservice/attachment/view/Attachment.controller.js":"/*\n * Copyright (C) 2009-2020 SAP SE or an SAP affiliate company. All rights reserved.\n */\nsap.ui.define(['sap/m/MessageBox','sap/ui/core/format/DateFormat','sap/ui/core/format/FileSizeFormat'],function(M){'use strict';sap.ui.controller('sap.se.mi.plm.lib.attachmentservice.attachment.view.Attachment',{_MODE:{CREATE:'I',DISPLAY:'D',CHANGE:'C'},_ACTION:{DELETEATTACHMENT:'Delete',RENAMEATTACHMENT:'Rename',LISTATTACHMENT:'List',SAVEATTACHMENT:'Save',CANCELATTACHMENT:'Cancel',DRAFTATTACHMENT:'Draft',COUNTATTACHMENT:'Count',CREATEURL:'CreateUrl'},onInit:function(){try{this._serviceUrl=this.getURLForService();}catch(e){jQuery.sap.log.error(e);this._serviceUrl='/sap/opu/odata/sap/CV_ATTACHMENT_SRV';}this.validURLType=['text/url','text/html'];this._properties={semanticObject:'',objectKey:'',objectType:'',documentPart:'',documentVersion:'',documentNumber:'',documentType:'',mode:'',visibleEdit:false,visibleDelete:false};this._objects={oModel:undefined};this._fieldControl={'_VisibleAttributes':{},'_VisibleActions':{}};this._fieldControl._VisibleAttributes.UPLOADEDBY=true;this._fieldControl._VisibleAttributes.UPLOADEDON=true;this._fieldControl._VisibleAttributes.FILESIZE=true;this._fieldControl._VisibleAttributes.ENABLELINK=true;this._fieldControl._VisibleAttributes.ATTACHMENTSTATUS=true;this._fieldControl._VisibleAttributes.ATTACHMENTTITLE=true;this._fieldControl._VisibleAttributes.SOURCE=true;this._fieldControl._VisibleAttributes.DIRDETAILS=false;this._fieldControl._VisibleActions.RENAME=true;this._fieldControl._VisibleActions.DELETE=true;this._fieldControl._VisibleActions.ADD=true;this._fieldControl._VisibleActions.ADDURL=true;this._fieldControl._VisibleActions.DOWNLOAD=false;this.oResult={status:'',fileName:''};this.uploadCount=0;this.uploadCountSuccess=0;this.uploadCountFailed=0;this.uploadCountTerminated=0;this._objects.oModel=new sap.ui.model.odata.ODataModel(this._serviceUrl,true);this._objects.oResModel=new sap.ui.model.resource.ResourceModel({bundleUrl:jQuery.sap.getModulePath('sap.se.mi.plm.lib.attachmentservice.attachment')+'/i18n/i18n.properties'});this.getView().setModel(this._objects.oResModel,'i18n');this._objects.oUiModel=new sap.ui.model.json.JSONModel({editMode:false});this.getView().setModel(this._objects.oUiModel,'ui');this.byId('myId').setModel(this._objects.oUiModel,'ui');this.checkedInStatusShow=false;this.itemforcheckingin={};this.getView().byId('attachmentServiceFileUpload').addEventDelegate({onBeforeRendering:function(){this.getView().byId('attachmentTitle').setText(this._showAttachmentsNumber());this.byId('AddUrl').setVisible(this._fieldControl._VisibleActions.ADDURL);this.getOwnerComponent().setAttachmentCount(this.byId('attachmentServiceFileUpload').getItems().length);}.bind(this)});},getURLForService:function(){var s=sap.ushell.Container.getService('AppLifeCycle').getCurrentApplication().componentInstance.getComponentData().startupParameters['sap-system'];if(s!==undefined){s=sap.ushell.Container.getService('AppLifeCycle').getCurrentApplication().componentInstance.getComponentData().startupParameters['sap-system'][0];}return(sap.ui.model.odata.ODataUtils.setOrigin('/sap/opu/odata/sap/CV_ATTACHMENT_SRV',s));},getAttributeList:function(){var a=this._fieldControl;return a;},flavorControl:function(f){if(f&&f==='withCheckIn'){this.byId('CheckInButton').setVisible(true);this.byId('CheckOutButton').setVisible(true);this.byId('ResetCheckOutButton').setVisible(true);this.checkedInStatusShow=true;var u=this.byId('attachmentServiceFileUpload');u.setMode('MultiSelect');var s=u.getSelectedItems();jQuery.each(s,function(i){u.setSelectedItem(s[i],false);});}else{this.byId('CheckInButton').setVisible(false);this.byId('CheckOutButton').setVisible(false);this.byId('ResetCheckOutButton').setVisible(false);this.byId('attachmentServiceFileUpload').setMode('None');}},setAttributes:function(a){this._fieldControl._VisibleAttributes.UPLOADEDBY=a._VisibleAttributes.UPLOADEDBY;this._fieldControl._VisibleAttributes.UPLOADEDON=a._VisibleAttributes.UPLOADEDON;this._fieldControl._VisibleAttributes.FILESIZE=a._VisibleAttributes.FILESIZE;this._fieldControl._VisibleAttributes.ENABLELINK=a._VisibleAttributes.ENABLELINK;this._fieldControl._VisibleAttributes.ATTACHMENTSTATUS=a._VisibleAttributes.ATTACHMENTSTATUS;this._fieldControl._VisibleAttributes.ATTACHMENTTITLE=a._VisibleAttributes.ATTACHMENTTITLE;this._fieldControl._VisibleAttributes.SOURCE=a._VisibleAttributes.SOURCE;this._fieldControl._VisibleAttributes.DIRDETAILS=a._VisibleAttributes.DIRDETAILS;this._fieldControl._VisibleActions.RENAME=a._VisibleActions.RENAME;this._fieldControl._VisibleActions.DELETE=a._VisibleActions.DELETE;this._fieldControl._VisibleActions.ADD=a._VisibleActions.ADD;this._fieldControl._VisibleActions.ADDURL=a._VisibleActions.ADDURL;this._fieldControl._VisibleActions.DOWNLOAD=a._VisibleActions.DOWNLOAD;},onBeforeRendering:function(){var o=this.getOwnerComponent();this.flavorControl(this.getOwnerComponent().getFlavor());var e=o.getMode()!=='D'?true:false;this._objects.oUiModel.setProperty('/editMode',e);},_changeHostname:function(l){var a=l.split('/');a[2]=location.hostname+(location.port?':'+location.port:'');return a.join('/');},_backendCall:function(a,c){switch(a){case this._ACTION.DELETEATTACHMENT:return this._onDeleteAttachment(this,c);case this._ACTION.LISTATTACHMENT:return this._retrieveAttachment(this,c);case this._ACTION.RENAMEATTACHMENT:return this._onRenameAttachment(this,c);case this._ACTION.COUNTATTACHMENT:return this._getAttachmentsCount(this,c);case this._ACTION.SAVEATTACHMENT:return this._commitChange(this,c);case this._ACTION.CANCELATTACHMENT:return this._cancelChange(this,c);case this._ACTION.DRAFTATTACHMENT:return this._getApplicationStatus(this,c);case this._ACTION.CREATEURL:return this._onCreateUrlAsAttachment(this,c);}},_onDeleteAttachment:function(s,i){var r=false;s._objects.oModel.setHeaders(s._setHeader(s._ACTION.DELETEATTACHMENT));var u='/OriginalContentSet('+s._prepareUrlParameters(s._ACTION.DELETEATTACHMENT,i)+')';s._objects.oModel.remove(u,null,function(){r=true;},function(e){s._showErrorMessage(JSON.parse(e.response.body).error.message.value,'');});return r;},_retrieveAttachment:function(s,c){var i=false;var b=[];var a=encodeURI(s._prepareUrlParameters(s._ACTION.LISTATTACHMENT,null));b.push(s._objects.oModel.createBatchOperation('/GetAllOriginals?'+a,'GET'));b.push(s._objects.oModel.createBatchOperation('/GetArchiveLinkAttachments?'+encodeURI(s._prepareUrlParametersForArchiveLink(s._ACTION.LISTATTACHMENT),null),'GET'));s._objects.oModel.addBatchReadOperations(b);s._objects.oModel.submitBatch(function(d){s._objects.oModel.refresh();i=true;var r=[];d.__batchResponses.forEach(function(e){if(e.response){s._showErrorMessage(JSON.parse(e.response.body).error.message.value,'');}else{r=r.concat(e.data.results);}});s._setOriginal({results:r});if(d.results&&d.results.length!==0){if(d.results[0].UxFCAdd===0){s.byId('attachmentServiceFileUpload').setUploadEnabled(false);}}},function(e){s._showErrorMessage(JSON.parse(e.response.body).error.message.value,'');});return i;},convertJSONtoXML:function(j,t){var a=function(v,b,c){var x='';if(v instanceof Array){for(var i=0,n=v.length;i<n;i++){x+=c+a(v[i],b,c+'\\t')+'\\n';}}else if(typeof(v)=='object'){var h=false;x+=c+'<'+b;for(var m in v){if(m.charAt(0)=='@'){x+=' '+m.substr(1)+\"=\\\"\"+v[m].toString()+\"\\\"\";}else{h=true;}}x+=h?'>':'/>';if(h){for(var m in v){if(m=='#text'){x+=v[m];}else if(m=='#cdata'){x+='<![CDATA['+v[m]+']]>';}else if(m.charAt(0)!='@'){x+=a(v[m],m,c+'\\t');}}x+=(x.charAt(x.length-1)=='\\n'?c:'')+'</'+b+'>';}}else{x+=c+'<'+b+'>'+v.toString()+'</'+b+'>';}return x;},x='';for(var m in j){x+=a(j[m],m,'');}return t?x.replace(/\\t/g,t):x.replace(/\\t|\\n/g,'');},onDownloadAll:function(a,c){var s=this;var m;var b=[];var r={'FileList':[]};var F;jQuery.each(a.objectKeyList,function(i){var k=\"ObjectKey='\"+a.objectKeyList[i].objectKey+\"'\";var t=\"ObjectType='\"+a.objectKeyList[i].objectType+\"'\";var K=\"ArchiveObjectID='\"+a.objectKeyList[i].objectKey+\"'\";var T=\"ArchiveObjectType='\"+a.objectKeyList[i].objectType+\"'\";var S=\"SemanticObjectType='\"+''+\"'\";var e=encodeURI(k+'&'+t+'&'+S);var d=encodeURI(K+'&'+T+'&'+S);b.push(s._objects.oModel.createBatchOperation('/GetAllOriginals?'+e,'GET'));b.push(s._objects.oModel.createBatchOperation('/GetArchiveLinkAttachments?'+d,'GET'));});s._objects.oModel.addBatchReadOperations(b);s._objects.oModel.submitBatch(function(d){var e=[];d.__batchResponses.forEach(function(g,h){if(g.response){s._showErrorMessage(JSON.parse(g.response.body).error.message.value,'');}else{e=e.concat(g.data.results);for(var i=0;i<g.data.results.length;i++){if(!g.data.results[i].ContentSource){m=parseInt(h/2);F={'objectType':a.objectKeyList[m].objectType,'objectKey':a.objectKeyList[m].objectKey,'FileName':e[i].Filename,'success':true,'messageText':'','url':s._changeHostname(e[i].__metadata.media_src)};r.FileList.push(F);}}}});var p=[];if(e.length!==0){for(var i=0;i<e.length;i++){if(!e[i].ContentSource){var f=s._changeHostname(e[i].__metadata.media_src);p.push(s._downloadFilePromise(f,e[i].Filename,e[i].ContentType));}}}Promise.all(p).then(function(g){for(i=0;i<r.FileList.length;i++){r.FileList[i].success=g[i];}c(r);sap.ui.core.util.File.save(s.convertJSONtoXML(r),'log-'+Date(),'xml','application/xml','utf-8');});});},_downloadFilePromise:function(d,f,m){return new Promise(function(r,a){var b=null;var c;var x=new window.XMLHttpRequest();x.open('GET',d,true);x.responseType='blob';x.onload=function(){var F=f.split('.')[0];var e=f.split('.')[1];b=x.response;if(x.status!==400){sap.ui.core.util.File.save(b,F,e,m,'utf-8');c=true;}else{c=false;}r(c);};x.send();});},_onDownloadAllAttach:function(e){var u=this.getView().byId('attachmentServiceFileUpload');var s=u.getSelectedItems();if(s.length!==0){for(var i=0;i<s.length;i++){if(!this._isValidURLType(s[i].getMimeType())){u.downloadItem(s[i],true);}}}else{u.selectAll();s=u.getItems();for(i=0;i<s.length;i++){if(!this._isValidURLType(s[i].getMimeType())){u.downloadItem(s[i],true);}}}},_onRenameAttachment:function(s,i){var r=false;s._objects.oModel.create('/RenameAttachment?'+s._prepareUrlParameters(s._ACTION.RENAMEATTACHMENT,i),null,null,function(d){r=d;},function(e){s._showErrorMessage(JSON.parse(e.response.body).error.message.value,'');});return r;},_getAttachmentsCount:function(s,c){var r;s._objects.oModel.read('/GetAttachmentCount',null,s._prepareUrlParameters(s._ACTION.COUNTATTACHMENT,null),false,function(d,R){r=JSON.parse(R.body).d.GetAttachmentCount;},function(e){s._showErrorMessage(JSON.parse(e.response.body).error.message.value,'');});return r;},_onCreateUrlAsAttachment:function(s,i){var r=false;s._objects.oModel.create('/CreateUrlAsAttachment?'+s._prepareParametersToCreateUrl(s._ACTION.CREATEURL),null,null,function(d){r=true;var a=s.byId('attachmentServiceFileUpload').getModel('__attachmentData').getData();a.dataitems.unshift(s._mapResult(d));var m=new sap.ui.model.json.JSONModel(a);s.byId('attachmentServiceFileUpload').setModel(m,'__attachmentData');},function(e){s._showErrorMessage(JSON.parse(e.response.body).error.innererror.errordetails[0].message,'');});return r;},_commitChange:function(s,c){var R={isSaved:false,isRetrieved:false,isCanceled:false,msgDetail:{},innerErrorDetails:[]};var o;s._objects.oModel.create('/ConfirmAttachment?'+s._prepareUrlParameters(s._ACTION.SAVEATTACHMENT,null),null,null,function(e,r){R.isSaved=JSON.parse(r.body).d.ConfirmAttachment.Success;o=r.headers['sap-message'];},function(e){o=e.response.body;});if(o){o=s._prepareResponse(o);R.msgDetail=o.msgDetail;R.innerErrorDetails=o.innerErrorDetails;}return R;},_cancelChange:function(s,c){var r={isSaved:false,isRetrieved:false,isCanceled:false,msgDetail:{},innerErrorDetails:[]};s._objects.oModel.create('/CancelAttachment?'+s._prepareUrlParameters(s._ACTION.CANCELATTACHMENT,null),null,null,function(){r.isCanceled=true;},function(e){var R=s._prepareResponse(e.response.body);r.msgDetail=R.msgDetail;r.innerErrorDetails=R.innerErrorDetails;});return r;},_getApplicationStatus:function(s,c){var r;s._objects.oModel.read('/GetApplicationState',null,s._prepareUrlParameters(this._ACTION.DRAFTATTACHMENT,null),false,function(d,R){r=JSON.parse(R.body).d.GetApplicationState.IsDirty;},function(e){s._showErrorMessage(JSON.parse(e.response.body).error.message.value,'');});return r;},_getToken:function(){var t='',c=this;this._objects.oModel.refreshSecurityToken(function(e,o){t=c._objects.oModel.getSecurityToken();},function(e){c._showErrorMessage($(e.response.body).find('message').first().text(),'');},false);return t;},_commitChanges:function(i){var r=this._backendCall(this._ACTION.SAVEATTACHMENT,null);if(r.isSaved){if(i){var R=this._backendCall(this._ACTION.LISTATTACHMENT,null);r.isRetrieved=R;}}return r;},_cancelChanges:function(i){var r=this._backendCall(this._ACTION.CANCELATTACHMENT,null);if(r.isCanceled){if(i){var R=this._backendCall(this._ACTION.LISTATTACHMENT,null);r.isRetrieved=R;}}return r;},_getApplicationState:function(){var r=this._backendCall(this._ACTION.DRAFTATTACHMENT,null);return r;},_getOriginal:function(){this._setProperty();this._backendCall(this._ACTION.LISTATTACHMENT);},_getAttachmentCount:function(){var a={totalAttachmentCount:0,confirmedAttachmentCount:0,unconfirmedAttachmentCount:0};var r=this._backendCall(this._ACTION.COUNTATTACHMENT,null);if(r){a.totalAttachmentCount=r.TotalCount;a.confirmedAttachmentCount=r.ConfirmedCount;a.unconfirmedAttachmentCount=r.UnconfirmedCount;}return a;},_onUploadFile:function(e){var d=this.byId('attachmentServiceFileUpload').getModel('__attachmentData').getData();var f=e.getParameters().files;var m='';for(var i=0;i<f.length;i++){this.oResult.fileName=f[i].fileName;if(f[i].status===200||f[i].status===201){this.uploadCountSuccess+=1;var r=$.parseJSON(f[i].responseRaw).d;r.CreatedAt=new Date(parseInt(r.CreatedAt.substr(6)));if(this.checkingIn||this.checkingInAsNewVersion){this._updateFile(r);this.checkingIn=false;this.checkingInAsNewVersion=false;}else{d.dataitems.unshift(this._mapResult(r));this.byId('attachmentServiceFileUpload').getModel('__attachmentData').setData(d);}this.oResult.status='UPLOADSUCCESS';this.getOwnerComponent().fireOnupload(this.oResult);}else{m=m+f[i].fileName+': '+$.parseJSON(f[i].responseRaw).error.innererror.errordetails[0].message+'\\n';this.byId('attachmentServiceFileUpload').getModel('__attachmentData').refresh(true);this.uploadCountFailed+=1;this.oResult.status='UPLOADFAILURE';this.getOwnerComponent().fireOnupload(this.oResult);this.checkingIn=false;this.checkingInAsNewVersion=false;}}if(this.uploadCount===this.uploadCountSuccess+this.uploadCountFailed+this.uploadCountTerminated){this.oResult.status='UPLOADCOMPLETED';this.oResult.fileName='';this.getOwnerComponent().fireOnupload(this.oResult);}if(m){this._showErrorMessage(this._objects.oResModel.getResourceBundle().getText('MESSAGE_UPLOAD_FAILED'),m);}},_onBeforeUploadStarts:function(e){var s=this,p;var u=s.getView().byId('attachmentServiceFileUpload');this._setUploadCollectionHeader('objectkey',this._properties.objectKey,e);this._setUploadCollectionHeader('objecttype',this._properties.objectType,e);this._setUploadCollectionHeader('semanticobjecttype',this._properties.semanticObject,e);this._setUploadCollectionHeader('documentType',this._properties.documentType,e);this._setUploadCollectionHeader('documentNumber',this._properties.documentNumber,e);this._setUploadCollectionHeader('documentVersion',this._properties.documentVersion,e);this._setUploadCollectionHeader('documentPart',this._properties.documentPart,e);this._setUploadCollectionHeader('Accept','application/json',e);this._setUploadCollectionHeader('slug',btoa(encodeURIComponent(e.getParameters().fileName)),e);this._setUploadCollectionHeader('customStuff','customDatas',e);this._setUploadCollectionHeader('X-CSRF-Token',this._getToken(),e);if(this.checkingIn){p=this._getSelectedItemProperties(this.itemforcheckingin,u);this._setUploadCollectionHeader('ApplicationId',p.ApplicationId,e);this._setUploadCollectionHeader('FileID',p.FileId,e);this._setUploadCollectionHeader('CheckIn','X',e);this._setUploadCollectionHeader('CheckInAsNewVersion','',e);}else if(this.checkingInAsNewVersion){p=this._getSelectedItemProperties(this.itemforcheckingin,u);this._setUploadCollectionHeader('ApplicationId',p.ApplicationId,e);this._setUploadCollectionHeader('FileID',p.FileId,e);this._setUploadCollectionHeader('CheckIn','X',e);this._setUploadCollectionHeader('CheckInAsNewVersion','X',e);}},_onBeforeUploadFile:function(e){this.uploadCount+=e.getParameters().files.length;this.oResult.status='UPLOADSTARTED';this.oResult.fileName='';this.getOwnerComponent().fireOnupload(this.oResult);this.byId('attachmentServiceFileUpload').getModel('__attachmentData').refresh(true);},ShowUploadDialog:function(){var s=this;var d=new sap.m.Dialog({title:s._objects.oResModel.getResourceBundle().getText('Add_Url'),type:'Message',content:[new sap.m.Label({text:s._objects.oResModel.getResourceBundle().getText('URL'),labelFor:'URL'}),new sap.m.Input({maxLength:4000,id:'URL',type:'Url',liveChange:function(){if(s._checkUrl(this.getValue())){this.setValueState(sap.ui.core.ValueState.Success);}else{this.setValueState(sap.ui.core.ValueState.Error);}}}),new sap.m.Label({text:s._objects.oResModel.getResourceBundle().getText('URL_Description'),labelFor:'URLDesc'}),new sap.m.Input({maxLength:255,id:'URLDesc'})],beginButton:new sap.m.Button({text:s._objects.oResModel.getResourceBundle().getText('OK_button'),enabled:true,press:function(e){if(sap.ui.getCore().byId('URL').getValue().length>0){if(s._checkUrl(sap.ui.getCore().byId('URL').getValue())){s._backendCall(s._ACTION.CREATEURL,null);d.close();}else{s._showErrorMessage(s._objects.oResModel.getResourceBundle().getText('URL_INVALID'));}}else{s._showErrorMessage(s._objects.oResModel.getResourceBundle().getText('URL_BLANK'));}}}),endButton:new sap.m.Button({text:s._objects.oResModel.getResourceBundle().getText('Cancel_button'),press:function(){d.close();}}),afterClose:function(){d.destroy();}});d.open();},_onRenameFile:function(r){var s=this;if(s._properties.mode!=='D'){var R=this._backendCall(this._ACTION.RENAMEATTACHMENT,r.getParameters().item.getBindingContext('__attachmentData').getObject());if(R===false){this._backendCall(this._ACTION.LISTATTACHMENT,null);}if(R!==null){s._updateFile(R);}}},_onDeleteFile:function(e){var s=this;var d=s.byId('attachmentServiceFileUpload').getModel('__attachmentData').getData();var i=d.dataitems;jQuery.each(i,function(a){if(i[a]&&i[a].FileId===e.getParameters().item.getDocumentId()){s.oResult.fileName=i[a].Filename;if(s._backendCall(s._ACTION.DELETEATTACHMENT,i[a])){i.splice(a,1);s.byId('attachmentServiceFileUpload').getModel('__attachmentData').setData(d);}else{}}});},_onUploadTerminated:function(e){this.uploadCountTerminated+=1;this._showErrorMessage(this._objects.oResModel.getResourceBundle().getText('MESSAGE_UPLOAD_FAILED'),'');this.oResult.status='TERMINATED';this.getOwnerComponent().fireOnupload(this.oResult);this.byId('attachmentServiceFileUpload').getModel('__attachmentData').refresh(true);if(this.uploadCount===this.uploadCountSuccess+this.uploadCountFailed+this.uploadCountTerminated){this.oResult.status='UPLOADCOMPLETED';this.oResult.fileName='';this.getOwnerComponent().fireOnupload(this.oResult);}},_setAttachmentModel:function(d){var D=new sap.ui.model.json.JSONModel({dataitems:d});this.byId('attachmentServiceFileUpload').setModel(D,'__attachmentData');},_prepareResponse:function(b){var m={msgDetail:{},innerErrorDetails:[]};var e=JSON.parse(b).error;m.msgDetail.msgText=e.message.value;m.msgDetail.code=e.code;e=e.innererror.errordetails;jQuery.each(e,function(i){var a={};a.msgText=e[i].message;a.code=e[i].code;a.severity=e[i].severity;m.innerErrorDetails.push(a);});return m;},_setOriginal:function(r){if(r!==null){var d=[];var i=0,l=r.results.length;for(i=0;i<l;i++){d.push(this._mapResult(r.results[i]));}this._setAttachmentModel(d);}},_setUploadCollectionHeader:function(n,v,e){var c=new sap.m.UploadCollectionParameter({name:n,value:v});e.getParameters().addHeaderParameter(c);},_prepareUrlParameters:function(a,r){var i,I,n,N,t,p,v;i=I=n=N=t=p=v='';if(r!==null){i=\"FileId='\"+r.FileId+\"'\";I=\"ApplicationId='\"+r.ApplicationId+\"'\";n=\"Filename='\"+r.Filename+\"'\";N=\"Documentnumber='\"+r.Documentnumber+\"'\";t=\"Documenttype='\"+r.Documenttype+\"'\";p=\"Documentpart='\"+r.Documentpart+\"'\";v=\"Documentversion='\"+r.Documentversion+\"'\";}var k=\"ObjectKey='\"+this._properties.objectKey+\"'\";var T=\"ObjectType='\"+this._properties.objectType+\"'\";var s=\"SemanticObjectType='\"+this._properties.semanticObject+\"'\";switch(a){case this._ACTION.DELETEATTACHMENT:return i+','+I+','+N+','+t+','+p+','+v;case this._ACTION.RENAMEATTACHMENT:return k+'&'+T+'&'+s+'&'+i+'&'+I+'&'+n+'&'+N+'&'+t+'&'+p+'&'+v;case this._ACTION.LISTATTACHMENT:return k+'&'+T+'&'+s+'&IsDraft='+this.getOwnerComponent().getIsDraft();default:return k+'&'+T+'&'+s;}},_prepareUrlParametersForArchiveLink:function(a){var k=\"ArchiveObjectID='\"+this._properties.objectKey+\"'\";var t=\"ArchiveObjectType='\"+this._properties.objectType+\"'\";var s=\"SemanticObjectType='\"+this._properties.semanticObject+\"'\";return k+'&'+t+'&'+s;},_prepareParametersToCreateUrl:function(a){var k=\"ObjectKey='\"+this._properties.objectKey+\"'\";var t=\"ObjectType='\"+this._properties.objectType+\"'\";var s=\"SemanticObjectType='\"+this._properties.semanticObject+\"'\";var U=\"URL='\"+encodeURIComponent(sap.ui.getCore().byId('URL').getValue())+\"'\";this._checkUrl(U);var u=\"UrlDescription='\"+encodeURIComponent(sap.ui.getCore().byId('URLDesc').getValue())+\"'\";var T=\"MIMEType='text/url'\";return k+'&'+t+'&'+s+'&'+u+'&'+U+'&'+T;},_checkUrl:function(u){var R=/^(ftp|http|https):\\/\\/\\\\?[a-z0-9]+([\\-\\.]{1}[a-z0-9]+)*(\\.|\\:)[a-z0-9]{2,5}(:[0-9]{1,5})?(\\/.*)?$/ig;if(R.test(u)){return true;}else{return false;}},_setHeader:function(a){var h={'objectkey':this._properties.objectKey,'objecttype':this._properties.objectType,'semanticobjecttype':this._properties.semanticObject};if(a===this._ACTION.DELETEATTACHMENT){h.MarkForDeletion=true;}return h;},_formatFileSize:function(v){if(jQuery.isNumeric(v)){return sap.ui.core.format.FileSizeFormat.getInstance({binaryFilesize:false,maxFractionDigits:1,maxIntegerDigits:3}).format(v);}else{return v;}},_showAttachmentsNumber:function(){var a=this.byId('attachmentServiceFileUpload').getItems().length;var b=this._objects.oResModel.getResourceBundle().getText('Attachment_Title');var s=b+' ('+a.toString()+')';return s;},_mapResult:function(f){if(f.Documentnumber&&this._properties.documentNumber===''){this._properties.documentPart=f.Documentpart;this._properties.documentVersion=f.Documentversion;this._properties.documentNumber=f.Documentnumber;this._properties.documentType=f.Documenttype;}var a=false,b=false;if(f.UxFCDelete===1){b=true;}if(f.UxFCRename===1){a=true;}var o={'content_type':f.__metadata.content_type,'Filename':f.Filename,'url':this._getLinkStatus(f),'FileId':f.FileId?f.FileId:f.ArchiveDocumentID,'ApplicationId':f.ApplicationId,'Documentnumber':f.Documentnumber,'Documenttype':f.Documenttype,'Documentversion':f.Documentversion,'Documentpart':f.Documentpart,'enableEdit':this._getEditMode(),'enableDelete':this._getDeleteMode()&&b,'visibleEdit':this._properties.visibleEdit&&a,'visibleDelete':this._properties.visibleDelete&&b,'attributes':this._getAttributes(f),'statuses':this._getStatuses(f)};return o;},_getLinkStatus:function(f){var u='';if(this._fieldControl._VisibleAttributes.ENABLELINK===true){if(f.ContentSource&&f.ContentSource.length>0){u=f.ContentSource;}else{u=this._changeHostname(f.__metadata.media_src);}}else{u='';}return u;},_getStatuses:function(f){var s=[];var t;var d={'title':this._objects.oResModel.getResourceBundle().getText('Status_Title'),'text':this._objects.oResModel.getResourceBundle().getText('Draft_Title')};if(this._fieldControl._VisibleAttributes.ATTACHMENTSTATUS&&f.AttachmentStatus==='DRAFT'){s.push(d);}if(this._fieldControl._VisibleAttributes.SOURCE&&f.Source){var a={'title':this._objects.oResModel.getResourceBundle().getText('Source_Title'),'text':f.Source,'state':'Success'};s.push(a);}if(this.checkedInStatusShow){if(f.CheckedInStatus===true){t={'text':this._objects.oResModel.getResourceBundle().getText('CheckedIn'),'icon':'sap-icon://locked','state':'Success'};}else{t={'text':this._objects.oResModel.getResourceBundle().getText('CheckedOut'),'icon':'sap-icon://unlocked','state':'Error'};}s.push(t);}return s;},_getAttributes:function(f){var a=[];var t={};if(this._fieldControl._VisibleAttributes.UPLOADEDBY===true){t={'title':this._objects.oResModel.getResourceBundle().getText('Uploaded_By_Title'),'text':f.FullName};a.push(t);}if(this._fieldControl._VisibleAttributes.UPLOADEDON===true){t={'title':this._objects.oResModel.getResourceBundle().getText('Uploaded_On_Title'),'text':sap.ui.core.format.DateFormat.getDateInstance({pattern:'dd-MM-yyyy'}).format(f.CreatedAt)};a.push(t);}if(this._fieldControl._VisibleAttributes.FILESIZE===true){if(!this._isValidURLType(f.ContentType)){t={'title':this._objects.oResModel.getResourceBundle().getText('File_Size_Title'),'text':this._formatFileSize(f.Filesize)};a.push(t);}}if(this._fieldControl._VisibleAttributes.DIRDETAILS===true){t={'title':this._objects.oResModel.getResourceBundle().getText('DIR_Details'),'text':f.Documenttype+'/'+f.Documentnumber+'/'+f.Documentversion+'/'+f.Documentpart,'active':true};a.push(t);}return a;},_getEditMode:function(){if(this._properties.documentType==='GOS'){this._properties.visibleEdit=false;}return this._properties.visibleEdit;},_getDeleteMode:function(){return this._properties.visibleDelete;},_showErrorMessage:function(m,a){var s=this;M.error(m,{icon:M.Icon.ERROR,title:s._objects.oResModel.getResourceBundle().getText('Error_Title'),actions:[M.Action.CLOSE],details:a});},_setActionVisibility:function(i){this.byId('attachmentTitle').setVisible(this._fieldControl._VisibleAttributes.ATTACHMENTTITLE);if(i===true){this._properties.visibleEdit=this._fieldControl._VisibleActions.RENAME;this._properties.visibleDelete=this._fieldControl._VisibleActions.DELETE;this.byId('attachmentServiceFileUpload').setUploadEnabled(this._fieldControl._VisibleActions.ADD);this.byId('AddUrl').setEnabled(this._fieldControl._VisibleActions.ADDURL);this.byId('AddUrl').setVisible(this._fieldControl._VisibleActions.ADDURL);this.byId('CheckInButton').setEnabled(false);this.byId('CheckOutButton').setEnabled(false);this.byId('ResetCheckOutButton').setEnabled(false);this.byId('Download').setVisible(this._fieldControl._VisibleActions.DOWNLOAD);this.byId('Download').setEnabled(this._fieldControl._VisibleActions.DOWNLOAD);this.flavorControl(this.getOwnerComponent().getFlavor());}else{this._properties.visibleEdit=false;this._properties.visibleDelete=false;this.byId('attachmentServiceFileUpload').setUploadEnabled(false);this.byId('AddUrl').setEnabled(false);this.byId('AddUrl').setVisible(this._fieldControl._VisibleActions.ADDURL);this.byId('CheckInButton').setEnabled(false);this.byId('CheckOutButton').setEnabled(false);this.byId('ResetCheckOutButton').setEnabled(false);this.byId('Download').setVisible(this._fieldControl._VisibleActions.DOWNLOAD);this.byId('Download').setEnabled(this._fieldControl._VisibleActions.DOWNLOAD);this.byId('attachmentServiceFileUpload').setMode('None');}},_setProperty:function(){switch(this._properties.mode){case this._MODE.CREATE:var d=[];this._setAttachmentModel(d);this._setActionVisibility(true);this.getView().getModel('ui').setProperty('/editMode',true);break;case this._MODE.CHANGE:this._setActionVisibility(true);break;default:this._setActionVisibility(false);}},_onSelectionChange:function(){var u=this.getView().byId('attachmentServiceFileUpload');if(u.getSelectedItems().length>0&&(this._properties.mode===this._MODE.CREATE||this._properties.mode===this._MODE.CHANGE)){this.getView().byId('CheckOutButton').setEnabled(true);this.getView().byId('ResetCheckOutButton').setEnabled(true);if(u.getSelectedItems().length===1){this.getView().byId('CheckInButton').setEnabled(true);}else{this.getView().byId('CheckInButton').setEnabled(false);}}else{this.getView().byId('CheckOutButton').setEnabled(false);this.getView().byId('CheckInButton').setEnabled(false);this.getView().byId('ResetCheckOutButton').setEnabled(false);}},_onAttributePress:function(e){var c=e.getSource().getText();var s=c.split('/');var f=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService;if(f){this.oCrossAppNavigator=f&&f('CrossApplicationNavigation');this.oCrossAppNavigator.toExternal({target:{semanticObject:'DocumentInfoRecord',action:'changeDIR'},params:{'DocumentInfoRecord':s[1],'DocumentType':s[0],'DocumentPart':s[3],'DocumentVersion':s[2]}});}},_onCheckIn:function(e){var b=e.getSource();if(!this._actionSheet){this._actionSheet=sap.ui.xmlfragment('sap.se.mi.plm.lib.attachmentservice.attachment.fragment.checkInActionSheet',this);this.getView().addDependent(this._actionSheet);}this._actionSheet.openBy(b);},_onCheckInOriginalPress:function(e){var u=this.getView().byId('attachmentServiceFileUpload');var s=u.getSelectedItem();this.itemforcheckingin=u.getSelectedItem();this.checkingIn=true;u.setMultiple(false);u.openFileDialog();u.setMultiple(true);},_onCheckInAsNewVersionPress:function(e){var u=this.getView().byId('attachmentServiceFileUpload');var s=u.getSelectedItem();this.itemforcheckingin=u.getSelectedItem();this.checkingInAsNewVersion=true;u.setMultiple(false);u.openFileDialog();u.setMultiple(true);},_onCheckOut:function(){var s=this;var p;var u=this.getView().byId('attachmentServiceFileUpload');var S=u.getSelectedItems();if(S){for(var i=0;i<S.length;i++){p=this._getSelectedItemProperties(S[i],u);s._objects.oModel.callFunction('/CheckOut',{method:'POST',urlParameters:{ApplicationId:p.ApplicationId,FileId:p.FileId},success:function(d){u.downloadItem(S[i],true);s._updateFile(d);},error:function(e){s._showErrorMessage(JSON.parse(e.response.body).error.message.value,'');}});}}},_onResetCheckOut:function(){var s=this;var p;var u=this.getView().byId('attachmentServiceFileUpload');var S=u.getSelectedItems();if(S){for(var i=0;i<S.length;i++){p=this._getSelectedItemProperties(S[i],u);s._objects.oModel.callFunction('/ResetCheckOut',{method:'POST',urlParameters:{ApplicationId:p.ApplicationId,FileId:p.FileId},success:function(d){s._updateFile(d);},error:function(e){s._showErrorMessage(JSON.parse(e.response.body).error.message.value,'');}});}}},_getSelectedItemProperties:function(S,u){var r=S.data();return r;},_updateFile:function(f){var s=this;var d=this.getView().byId('attachmentServiceFileUpload').getModel('__attachmentData').getData();var I=jQuery.extend(true,{},d).dataitems;for(var i=0;i<I.length;i++){if(I[i].ApplicationId===f.ApplicationId){I[i]=s._mapResult(f);}}this._setAttachmentModel(I);},commitChanges:function(i){return this._commitChanges(i);},cancelChanges:function(i){return this._cancelChanges(i);},setModeProperty:function(v){this._properties.mode=v;this._setProperty();},setProperties:function(a,o,b,s){if((o||s)&&b){this.byId('attachmentServiceVBoxPage').setVisible(true);this.getOwnerComponent().setProperty('objectKey',b);this.getOwnerComponent().setProperty('objectType',o);this.getOwnerComponent().setProperty('mode',a);this.getOwnerComponent().setProperty('semanticObject',s);this._properties.objectKey=b;this._properties.objectType=o;this._properties.semanticObject=s;this._properties.mode=a;this._properties.documentPart='';this._properties.documentVersion='';this._properties.documentNumber='';this._properties.documentType='';if(this._properties.objectKey&&(this._properties.objectType||this._properties.semanticObject)){this._getOriginal();}else{this._properties.mode='D';}}},getApplicationState:function(){if((this._properties.objectType||this._properties.semanticObject)&&this._properties.objectKey){return this._getApplicationState();}},getAttachmentCount:function(){if((this._properties.objectType||this._properties.semanticObject)&&this._properties.objectKey){return this._getAttachmentCount();}},_isValidURLType:function(m){var i=false;if(this.validURLType.indexOf(m.toLowerCase())>=0){i=true;}else{i=false;}return i;}});},true);\n",
	"sap/se/mi/plm/lib/attachmentservice/attachment/view/Attachment.view.xml":"<!--\n\n    Copyright (C) 2009-2020 SAP SE or an SAP affiliate company. All rights reserved.\n\n-->\n<core:View xmlns:core=\"sap.ui.core\" xmlns=\"sap.m\" xmlns:l=\"sap.ui.layout\" xmlns:ui=\"sap.ca.ui\"\n\tcontrollerName=\"sap.se.mi.plm.lib.attachmentservice.attachment.view.Attachment\" resourceBundleAlias=\"i18n\">\n\t<VBox id=\"attachmentServiceVBoxPage\">\n\t\t<UploadCollection id=\"attachmentServiceFileUpload\" items=\"{path : '__attachmentData>/dataitems', templateShareable : 'true'}\"\n\t\t\tshowSeparators=\"All\" fileDeleted=\"_onDeleteFile\" multiple=\"true\" fileRenamed=\"_onRenameFile\" uploadComplete=\"_onUploadFile\"\n\t\t\tchange=\"_onBeforeUploadFile\" beforeUploadStarts=\"_onBeforeUploadStarts\" uploadUrl=\"/sap/opu/odata/sap/CV_ATTACHMENT_SRV/OriginalContentSet\"\n\t\t\tuploadTerminated=\"_onUploadTerminated\" sameFilenameAllowed=\"true\" mode=\"None\" selectionChange=\"_onSelectionChange\"\n\t\t\tnoDataText=\"{i18n>No_entries}\">\n\t\t\t<toolbar>\n\t\t\t\t<OverflowToolbar id=\"myId\">\n\t\t\t\t\t<Title id=\"attachmentTitle\"/>\n\t\t\t\t\t<ToolbarSpacer/>\n\t\t\t\t\t<Link visible=\"false\" id=\"ResetCheckOutButton\" text=\"{i18n>Reset_CheckOut}\" press=\"_onResetCheckOut\"></Link>\n\t\t\t\t\t<Link visible=\"false\" id=\"CheckInButton\" text=\"{i18n>CheckIn_Button}\" press=\"_onCheckIn\"></Link>\n\t\t\t\t\t<Link visible=\"false\" id=\"CheckOutButton\" text=\"{i18n>CheckOut_Button}\" press=\"_onCheckOut\"></Link>\n\t\t\t\t\t<Link id=\"AddUrl\" enabled=\"\" icon=\"sap-icon://world\" type=\"emphasized\" text=\"{i18n>Add_Url}\" press=\"ShowUploadDialog\"></Link>\n\t\t\t\t\t<Button id=\"Download\" tooltip=\"{i18n>Download_Button}\" press=\"_onDownloadAllAttach\" enabled=\"false\" type=\"Transparent\"\n\t\t\t\t\t\ticon=\"sap-icon://download\"></Button>\n\t\t\t\t\t<UploadCollectionToolbarPlaceholder></UploadCollectionToolbarPlaceholder>\n\t\t\t\t</OverflowToolbar>\n\t\t\t</toolbar>\n\t\t\t<UploadCollectionItem contributor=\"{__attachmentData>CreatedBy}\" documentId=\"{__attachmentData>FileId}\"\n\t\t\t\tfileName=\"{__attachmentData>Filename}\" mimeType=\"{__attachmentData>content_type}\" uploadedDate=\"{__attachmentData>CreatedAt}\"\n\t\t\t\turl=\"{__attachmentData>url}\" enableEdit=\"{__attachmentData>enableEdit}\" enableDelete=\"{__attachmentData>enableDelete}\"\n\t\t\t\tvisibleEdit=\"{__attachmentData>visibleEdit}\" visibleDelete=\"{__attachmentData>enableDelete}\"\n\t\t\t\tattributes=\"{path : '__attachmentData>attributes', templateShareable : 'true'}\"\n\t\t\t\tstatuses=\"{path : '__attachmentData>statuses', templateShareable : 'true'}\">\n\t\t\t\t<customData>\n\t\t\t\t\t<core:CustomData key=\"ApplicationId\" value=\"{__attachmentData>ApplicationId}\"/>\n\t\t\t\t\t<core:CustomData key=\"FileId\" value=\"{__attachmentData>FileId}\"/>\n\t\t\t\t</customData>\n\t\t\t\t<attributes>\n\t\t\t\t\t<ObjectAttribute title=\"{__attachmentData>title}\" text=\"{path : '__attachmentData>text'}\"/>\n\t\t\t\t</attributes>\n\t\t\t\t<statuses>\n\t\t\t\t\t<ObjectStatus title=\"{__attachmentData>title}\" text=\"{__attachmentData>text}\" state=\"{__attachmentData>state}\"\n\t\t\t\t\t\ticon=\"{__attachmentData>icon}\" iconDensityAware=\"{__attachmentData>iconDensityAware}\" textDirection=\"{__attachmentData>textDirection}\"/>\n\t\t\t\t</statuses>\n\t\t\t</UploadCollectionItem>\n\t\t</UploadCollection>\n\t</VBox>\n</core:View>",
	"sap/se/mi/plm/lib/attachmentservice/library.js":"/*\n * Copyright (C) 2009-2020 SAP SE or an SAP affiliate company. All rights reserved.\n */\nsap.ui.define(['sap/m/library','sap/ui/core/Core','sap/ui/core/library'],function(l,C,a){'use strict';sap.ui.getCore().initLibrary({name:'sap.se.mi.plm.lib.attachmentservice',noLibraryCSS:true,dependencies:['sap.ui.core','sap.m'],types:[],interfaces:[],controls:[],elements:[],version:'4.0.35'});return sap.se.mi.plm.lib.attachmentservice;},true);\n",
	"sap/se/mi/plm/lib/attachmentservice/manifest.json":"{\n  \"_version\": \"1.2.0\",\n  \"sap.app\": {\n    \"_version\": \"1.2.0\",\n    \"id\": \"sap.se.mi.plm.lib.attachmentservice\",\n    \"type\": \"library\",\n    \"embeds\": [\n      \"attachment\",\n      \"attachment/components/stcomponent\"\n    ],\n    \"i18n\": \"i18n/i18n.properties\",\n    \"applicationVersion\": {\n      \"version\": \"4.0.35\"\n    },\n    \"title\": \"{{title}}\",\n    \"description\": \"{{description}}\",\n    \"ach\": \"PLM-FIO-DMS\",\n    \"resources\": \"resources.json\",\n    \"offline\": false\n  },\n  \"sap.ui\": {\n    \"_version\": \"1.1.0\",\n    \"technology\": \"UI5\",\n    \"deviceTypes\": {\n      \"desktop\": true,\n      \"tablet\": true,\n      \"phone\": true\n    },\n    \"supportedThemes\": [\n      \"sap_bluecrystal\",\n      \"sap_hcb\"\n    ]\n  },\n  \"sap.ui5\": {\n    \"_version\": \"1.1.0\",\n    \"dependencies\": {\n      \"minUI5Version\": \"1.44\",\n      \"libs\": {\n        \"sap.ui.core\": {\n          \"minVersion\": \"1.44.42\"\n        },\n        \"sap.m\": {\n          \"minVersion\": \"1.44.42\"\n        }\n      }\n    },\n    \"contentDensities\": {\n      \"cozy\": false,\n      \"compact\": false\n    }\n  },\n  \"sap.fiori\": {\n    \"_version\": \"1.1.0\",\n    \"registrationIds\": [\n      \"F1243\"\n    ],\n    \"archeType\": \"reusecomponent\"\n  },\n  \"sap.platform.abap\": {\n    \"_version\": \"1.1.0\",\n    \"uri\": \"/sap/bc/bsp/sap/plm_ath_cres1/\"\n  },\n  \"sap.platform.hcp\": {\n    \"_version\": \"1.1.0\",\n    \"uri\": \"\"\n  }\n}"
}}
